import matplotlib
matplotlib.use('Agg')

import matplotlib.pyplot as plt
import numpy as np

benchmarkName = 'SSSP'

data = {8114: ([43494904.0, 45388397.0, 45853964.0, 45122769.0, 45026421.0, 38130251.0, 51200511.0, 39085221.0, 37943998.0, 45561374.0, 53209494.0, 52888957.0, 38733363.0, 40586786.0, 41674902.0, 46691531.0, 43563413.0, 42355019.0, 43201521.0, 46837488.0], [72683157.0, 66486492.0, 63101743.0, 69221102.0, 66881631.0, 66380637.0, 77207472.0, 67232315.0, 82138997.0, 69666460.0, 64443433.0, 71507595.0, 68180507.0, 69559693.0, 66900005.0, 66502624.0, 67762894.0, 65146070.0, 80983051.0, 64048836.0], [52531217.0, 47598518.0, 52403603.0, 46937892.0, 47673995.0, 43023014.0, 48987853.0, 48601544.0, 45927634.0, 56971701.0, 43305473.0, 44508284.0, 44576478.0, 48697547.0, 44819398.0, 40625280.0, 47501733.0, 47123498.0, 45116080.0, 49143735.0]), 62586: ([135986349.0, 129886602.0, 135408649.0, 139242386.0, 138960397.0, 152241356.0, 132646703.0, 153702370.0, 147030416.0, 143276314.0, 136057595.0, 144257143.0, 136190989.0, 138229980.0, 127974309.0, 148257121.0, 125089233.0, 141331775.0, 143452667.0, 163668337.0], [329247201.0, 311947015.0, 323129901.0, 335520127.0, 361823009.0, 330573624.0, 355341533.0, 340749241.0, 338968954.0, 332387860.0, 338943878.0, 317688734.0, 333837541.0, 307559889.0, 349024974.0, 314391657.0, 336371400.0, 332860279.0, 319788672.0, 358442010.0], [176044569.0, 153330714.0, 154806496.0, 159417591.0, 149751685.0, 173148773.0, 151945550.0, 144510629.0, 159588548.0, 159141299.0, 161025265.0, 162945320.0, 180362047.0, 162008225.0, 152540179.0, 166789812.0, 164995198.0, 158463869.0, 158294315.0, 186503067.0]), 36682: ([92838572.0, 109017523.0, 90426484.0, 94207864.0, 92867271.0, 97266790.0, 108564425.0, 101319071.0, 93990734.0, 95547229.0, 104631918.0, 98350847.0, 96223226.0, 105443674.0, 91824500.0, 96805741.0, 95834921.0, 86572925.0, 92929541.0, 112344570.0], [213914881.0, 208687720.0, 199752999.0, 217497258.0, 196307742.0, 205589131.0, 198359248.0, 221558178.0, 218970489.0, 201919088.0, 212079257.0, 218532611.0, 228777278.0, 197104821.0, 207302550.0, 207047746.0, 206386603.0, 203744069.0, 214941550.0, 203357299.0], [107017182.0, 108987855.0, 122781698.0, 107389128.0, 95435661.0, 108839306.0, 112536541.0, 108632000.0, 115251557.0, 104842457.0, 101949067.0, 103044078.0, 109788382.0, 112185133.0, 118407913.0, 122630675.0, 115381247.0, 115761611.0, 128564684.0, 106986302.0]), 22687: ([78664099.0, 65524076.0, 73251093.0, 64259229.0, 69750474.0, 74219499.0, 73980147.0, 79610738.0, 79975720.0, 77332116.0, 75262901.0, 84408785.0, 67369617.0, 64545532.0, 80722927.0, 80252949.0, 62943849.0, 71683139.0, 73845488.0, 65156945.0], [139757836.0, 160720349.0, 138775216.0, 144002790.0, 140531510.0, 147089891.0, 134684051.0, 131667726.0, 145589355.0, 147006421.0, 136063433.0, 135306938.0, 144374279.0, 139966501.0, 136402609.0, 154036104.0, 147611014.0, 150500956.0, 143754240.0, 145157554.0], [79715196.0, 80878737.0, 79057435.0, 86580472.0, 71041211.0, 89444581.0, 85401503.0, 76761006.0, 101569541.0, 86138776.0, 86751475.0, 80287536.0, 89585346.0, 85981761.0, 70384983.0, 84019377.0, 79631132.0, 84247635.0, 87322682.0, 71073940.0])}

names = ['Baseline', 'Diesel']
linestyles = ['--', ':']
colors = ['red', 'green']

sizes = []
times = ([], [])
comms = ([], [])

for datum in sorted(data.keys()):
  sizes.append(datum)
  baseline = np.mean(data[datum][0])/1e9
  # times[0].append(baseline/baseline)
  times[0].append(((np.mean(data[datum][1])/1e9)-baseline)/baseline*100)
  times[1].append(((np.mean(data[datum][2])/1e9)-baseline)/baseline*100)

# plt.figure(figsize=(2,2))
plt.title(benchmarkName, fontsize=20)
# plt.ticklabel_format(style='sci', axis='y', scilimits=(0,0))
for i in range(2):
  plt.plot(sizes, times[i],label=names[i],linestyle=linestyles[i],color=colors[i])
# plt.legend(loc='upper left')
plt.xlabel('Input Size', fontsize=20)
plt.ylabel('Overhead%', fontsize=20)
plt.xticks(fontsize=20, rotation=90)
plt.yticks(fontsize=20)
plt.tight_layout()
plt.savefig('times-{}.png'.format(benchmarkName))
plt.close('all')

# # plt.figure(figsize=(2,2))
# plt.title(benchmarkName, fontsize=20)
# # plt.ticklabel_format(style='sci', axis='y', scilimits=(0,0))
# for i in range(3):
#   plt.plot(sizes,comms[i],label=names[i],linestyle=linestyles[i],color=colors[i])
# # plt.legend(loc='upper left')
# plt.xlabel('Input Size', fontsize=20)
# plt.ylabel('Data (MB)', fontsize=20)
# plt.xticks(fontsize=20, rotation=90)
# plt.yticks(fontsize=20)
# plt.tight_layout()
# plt.savefig('comms-{}.png'.format(benchmarkName))
# plt.close('all')
