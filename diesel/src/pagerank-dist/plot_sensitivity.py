import matplotlib
matplotlib.use('Agg')

import matplotlib.pyplot as plt
import numpy as np

benchmarkName = 'PageRank'

data = {8144: ([42948157.0, 45356635.0, 47793539.0, 51691642.0, 49199625.0, 43385561.0, 45312576.0, 44756948.0, 46954607.0, 44403367.0, 46676049.0, 49045570.0, 42239926.0, 42893288.0, 44005482.0], [64913997.0, 59743523.0, 66583056.0, 66522063.0, 68327806.0, 63582461.0, 64656331.0, 65512658.0, 61033924.0, 59907325.0, 63500391.0, 64952118.0, 64007913.0, 64369339.0, 63323795.0], [45945724.0, 43030250.0, 45497640.0, 47935419.0, 48147622.0, 50668136.0, 50790404.0, 44490280.0, 56850907.0, 47927396.0, 47289236.0, 56084229.0, 46686582.0, 46003838.0, 45735076.0]), 22687: ([82295955.0, 95168533.0, 95560536.0, 89092008.0, 90627382.0, 90992838.0, 88120619.0, 94367922.0, 79498464.0, 92385174.0, 102301848.0, 83594536.0, 84363646.0, 97777989.0, 88566748.0], [141540467.0, 139351807.0, 147387199.0, 142398762.0, 147821020.0, 146568376.0, 161769718.0, 152896508.0, 148185943.0, 139527925.0, 174969208.0, 156389931.0, 148604004.0, 138185338.0, 164455960.0], [97052491.0, 92672777.0, 92766064.0, 93643723.0, 91070055.0, 99663325.0, 94140440.0, 101984048.0, 95839395.0, 100052780.0, 91625517.0, 96241876.0, 89096399.0, 99989084.0, 92962847.0]), 36682: ([123507290.0, 134509471.0, 130961001.0, 136831835.0, 122252154.0, 126070842.0, 124891910.0, 132468715.0, 116993472.0, 136185843.0, 145222226.0, 129095016.0, 163095593.0, 124992720.0, 138685883.0], [220285873.0, 221239720.0, 225462356.0, 211170746.0, 216771308.0, 222891911.0, 229291592.0, 228844909.0, 216006101.0, 227407176.0, 213313711.0, 218503069.0, 223552102.0, 216508225.0, 220715683.0], [127434079.0, 147107197.0, 137437225.0, 142579947.0, 133406252.0, 140421712.0, 154797209.0, 140738006.0, 157352405.0, 133078793.0, 144452335.0, 142202925.0, 130291871.0, 135927393.0, 127248761.0]), 62586: ([199711088.0, 209459663.0, 213978757.0, 219687425.0, 211036459.0, 192982674.0, 213568427.0, 205475747.0, 214166373.0, 193595129.0, 229421505.0, 225849908.0, 195074366.0, 211207282.0, 224321624.0], [394542355.0, 360049280.0, 401496199.0, 372126087.0, 385612680.0, 381153076.0, 376783496.0, 409473187.0, 365908555.0, 369962683.0, 367693617.0, 379708768.0, 368448527.0, 367049992.0, 366903799.0], [216225971.0, 234425098.0, 247302748.0, 237901282.0, 247984506.0, 223742563.0, 230558371.0, 247412747.0, 222261601.0, 226237122.0, 227274486.0, 230573568.0, 231077714.0, 228871503.0, 228273187.0])}

<<<<<<< HEAD
names = ['Baseline', 'Diesel']
=======
names = ['Unoptimized', 'Optimized']
>>>>>>> 23ae881cc9f84113e4fcd4c6bce92cae87a80620
linestyles = ['--', ':']
colors = ['red', 'green']

sizes = []
times = ([], [])
comms = ([], [])

for datum in sorted(data.keys()):
  sizes.append(datum)
  baseline = np.mean(data[datum][0])/1e9
  # times[0].append(baseline/baseline)
  times[0].append(((np.mean(data[datum][1])/1e9)-baseline)/baseline*100)
  times[1].append(((np.mean(data[datum][2])/1e9)-baseline)/baseline*100)

# plt.figure(figsize=(2,2))
plt.title(benchmarkName, fontsize=20)
# plt.ticklabel_format(style='sci', axis='y', scilimits=(0,0))
for i in range(2):
  plt.plot(sizes, times[i],label=names[i],linestyle=linestyles[i],color=colors[i])
<<<<<<< HEAD
# plt.legend(loc='upper left')
=======
plt.legend(loc='upper left')
>>>>>>> 23ae881cc9f84113e4fcd4c6bce92cae87a80620
plt.xlabel('Input Size', fontsize=20)
plt.ylabel('Overhead%', fontsize=20)
plt.xticks(fontsize=20, rotation=90)
plt.yticks(fontsize=20)
plt.tight_layout()
plt.savefig('times-{}.png'.format(benchmarkName))
plt.close('all')

# # plt.figure(figsize=(2,2))
# plt.title(benchmarkName, fontsize=20)
# # plt.ticklabel_format(style='sci', axis='y', scilimits=(0,0))
# for i in range(3):
#   plt.plot(sizes,comms[i],label=names[i],linestyle=linestyles[i],color=colors[i])
# # plt.legend(loc='upper left')
# plt.xlabel('Input Size', fontsize=20)
# plt.ylabel('Data (MB)', fontsize=20)
# plt.xticks(fontsize=20, rotation=90)
# plt.yticks(fontsize=20)
# plt.tight_layout()
# plt.savefig('comms-{}.png'.format(benchmarkName))
# plt.close('all')
